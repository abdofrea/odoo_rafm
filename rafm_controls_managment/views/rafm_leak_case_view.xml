<odoo>
  <!-- Form View -->
  <record id="view_ra_leak_case_form" model="ir.ui.view">
    <field name="name">ra.leak.case.form</field>
    <field name="model">ra.leak.case</field>
    <field name="arch" type="xml">
      <form string="RA Leak Case">
        <header>
			<button name="inprogress_case"
                string="Start"
                type="object"
                class="btn-primary"
                attrs="{'invisible': [('status', '!=', 'open')]}"/>
			<button name="close_case"
                string="Close"
                type="object"
                class="btn-danger"
                attrs="{'invisible': [('status', '!=', 'in_progress')]}"/>
			<button name="action_set_open"
                string="Re-open"
                type="object"
                class="btn-secondary"
                attrs="{'invisible': [('status', '!=', 'closed')]}"/>
			<field name="status" widget="statusbar" statusbar_visible="open,in_progress,closed"/>
        </header>

        <sheet>
          <group>
            <group>
              <field name="name" attrs="{'readonly': [('status', '=', 'closed')]}"/>
              <field name="category_id" attrs="{'readonly': [('status', '=', 'closed')]}" options="{'no_create': True, 'no_create_edit': True}"/>
            </group>
            <group string="Classification">
              <field name="severity" attrs="{'readonly': [('status', '=', 'closed')]}"/>
              <field name="detection_method" attrs="{'readonly': [('status', '=', 'closed')]}"/>
              <field name="detected_by_id"  options="{'no_create': True, 'no_create_edit': True}" attrs="{'readonly': [('status', '=', 'closed')]}"/>
			  <field name="date_reported" attrs="{'readonly': [('status', '=', 'closed')]}"/>
            </group>
            <group string="Timeline and Impact">
				<field name="date_started" attrs="{'readonly': [('status', '=', 'closed')]}"/>
				<field name="date_resolved" attrs="{'readonly': [('status', '=', 'closed')]}"/>
				<field name="case_duration"/>
			</group>
			<group string="Revenue Impact">
				<field name="impacted_revenue" invisible="1"/>
				<field name="total_loss_revenue"/>
				<field name="saved_revenue" attrs="{'readonly': [('status', '=', 'closed')]}"/>
            </group>
			<group string="Description">
              <field name="description" attrs="{'readonly': [('status', '=', 'closed')]}"/>
            </group>
          </group>
          <notebook>
            <page string="Case Details">
				<field name="leak_line_ids" attrs="{'readonly': [('status', '=', 'closed')]}">
					<tree editable="bottom">
						<field name="name"/>
						<field name="unit"/>
						<field name="unit_count"/>
						<field name="unit_cost"/>
						<field name="total_loss"/>
					</tree>
				</field>
            </page>
          </notebook>
        </sheet>
      </form>
    </field>
  </record>

  <!-- Tree View -->
  <record id="view_ra_leak_case_tree" model="ir.ui.view">
    <field name="name">ra.leak.case.tree</field>
    <field name="model">ra.leak.case</field>
    <field name="arch" type="xml">
      <tree string="RA Leak Cases">
        <field name="name"/>
        <field name="category_id"/>
        <field name="severity"/>
        <field name="status" widget="badge" decoration-warning="status == 'open'"
                                      decoration-info="status == 'in_progress'"
                                      decoration-success="status == 'closed'"/>
        <field name="detected_by_id"/>
        <field name="date_reported"/>
		<field name="case_duration"/>
        <field name="total_loss_revenue"/>
        <field name="saved_revenue"/>
      </tree>
    </field>
  </record>

  <!-- Action -->
  <record id="action_ra_leak_case" model="ir.actions.act_window">
    <field name="name">RA Leak Cases</field>
    <field name="res_model">ra.leak.case</field>
    <field name="view_mode">tree,form</field>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">
        Create your first RA leak case
      </p>
    </field>
  </record>


  <!-- Fraud Type Tree/Form Views -->
  <record id="view_ra_case_category" model="ir.ui.view">
    <field name="name">ra.leak.category.tree</field>
    <field name="model">ra.leak.category</field>
    <field name="arch" type="xml">
      <tree editable="bottom">
        <field name="name"/>
      </tree>
    </field>
  </record>

  <record id="action_ra_leak_category" model="ir.actions.act_window">
    <field name="name">RA Leak Category</field>
    <field name="res_model">ra.leak.category</field>
    <field name="view_mode">tree</field>
  </record>

</odoo>
